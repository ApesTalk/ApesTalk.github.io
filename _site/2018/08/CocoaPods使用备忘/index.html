<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <title>CocoaPods使用备忘</title>
  <meta name="description" content="  使用CocoaPods也有很长一段时间了，最近几个月的时间里也主导了公司私有Pods的创建和使用。在此期间踩过了不少坑，在踩坑的过程中也收获了不少经验，更加熟练地掌握了CocoaPods的一些指令的使用。本篇作为这段时间收获的备忘。">
  <meta name="author" content="ApesTalk">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="CocoaPods使用备忘">
  <meta name="twitter:description" content="  使用CocoaPods也有很长一段时间了，最近几个月的时间里也主导了公司私有Pods的创建和使用。在此期间踩过了不少坑，在踩坑的过程中也收获了不少经验，更加熟练地掌握了CocoaPods的一些指令的使用。本篇作为这段时间收获的备忘。">

  <meta property="og:type" content="article">
  <meta property="og:title" content="CocoaPods使用备忘">
  <meta property="og:description" content="  使用CocoaPods也有很长一段时间了，最近几个月的时间里也主导了公司私有Pods的创建和使用。在此期间踩过了不少坑，在踩坑的过程中也收获了不少经验，更加熟练地掌握了CocoaPods的一些指令的使用。本篇作为这段时间收获的备忘。">

  <link rel="icon" type="image/png" href="/assets/images/favicon.png" />
  <link href="/assets/images/favicon.png" rel="shortcut icon" type="image/png">

  <link rel="stylesheet" href="/css/main.css">
  <link href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">

  <link rel="canonical" href="http://localhost:4000/2018/08/CocoaPods%E4%BD%BF%E7%94%A8%E5%A4%87%E5%BF%98/">
  <link rel="alternate" type="application/rss+xml" title="ApesTalk" href="http://localhost:4000/feed.xml">

  <meta name="google-site-verification" content="1-1ZlHoRvM0T2FqPbW2S-qLgYXN6rsn52kErlMPd_gw" />

</head>


  <body>

    <span class="mobile btn-mobile-menu">
        <i class="fa fa-list btn-mobile-menu__icon"></i>
        <i class="fa fa-angle-up btn-mobile-close__icon hidden"></i>
    </span>
    
    <header class="panel-cover panel-cover--collapsed" style="background-image: url('/assets/images/background-cover.jpg')">
  <div class="panel-main">

    <div class="panel-main__inner panel-inverted">
    <div class="panel-main__content">

        <a href="/#blog" title="前往 ApesTalk 的主页" class="blog-button"><img src="/assets/images/avatar.jpeg" width="80" alt="ApesTalk logo" class="panel-cover__logo logo" /></a>
        <h1 class="panel-cover__title panel-title"><a href="/#blog" title="link to homepage for ApesTalk" class="blog-button">ApesTalk</a></h1>
        
        <span class="panel-cover__subtitle panel-subtitle">你必须非常努力，才能看起来毫不费力.欢迎关注微信公众号：猿故。</span>
        
        <hr class="panel-cover__divider" />
        <p class="panel-cover__description">鸟活着时，吃蚂蚁，鸟死后，蚂蚁吃鸟。一棵树可以制成一百万根火柴，烧光一百万棵树只需一根火柴。活着，低调做人。</p>
        <hr class="panel-cover__divider panel-cover__divider--secondary" />

        

        <div class="navigation-wrapper">
          <div>
            <nav class="cover-navigation cover-navigation--primary">
              <ul class="navigation">
                <li class="navigation__item"><a href="/#blog" title="访问我的博客" class="blog-button">博客</a></li>
                
                  <li class="navigation__item"><a href="https://www.jianshu.com/u/4f2d3d978842" target="_blank" title="Code_Ninja">简书</a></li>
                
                  <li class="navigation__item"><a href="https://ApesTalk.github.io" target="_blank" title="about me">关于我</a></li>
                
              </ul>
            </nav>
          </div>

          <div><nav class="cover-navigation navigation--social">
  <ul class="navigation">

  
  <!-- Weibo -->
  <li class="navigation__item">
    <a href="http://weibo.com/2406504374" title="@2406504374 的微博" target="_blank">
      <i class='social fa fa-weibo'></i>
      <span class="label">Weibo</span>
    </a>
  </li>
  

  
  <!-- Github -->
  <li class="navigation__item">
    <a href="https://github.com/ApesTalk" title="@ApesTalk 的 Github" target="_blank">
      <i class='social fa fa-github'></i>
      <span class="label">Github</span>
    </a>
  </li>
  
  
  

  

  <!-- RSS -->
  <li class="navigation__item">
    <a href="/feed.xml" rel="author" title="RSS" target="_blank">
      <i class='social fa fa-rss'></i>
      <span class="label">RSS</span>
    </a>
  </li>

  
  <!-- Email -->
  <li class="navigation__item">
    <a href="mailto:apestalk@gmail.com" title="Contact me">
      <i class='social fa fa-envelope'></i>
      <span class="label">Email</span>
    </a>
  </li>
  

  </ul>
</nav>
</div>
        </div>
      </div>
    </div>

    
    <div class="panel-cover--overlay cover-orange"></div>
    
  </div>
</header>


    <div class="content-wrapper">
        <div class="content-wrapper__inner">
            <article class="post-container post-container--single" itemscope itemtype="http://schema.org/BlogPosting">
  <header class="post-header">
    <div class="post-meta">
      <time datetime="2018-08-22 06:30:00 +0800" itemprop="datePublished" class="post-meta__date date">2018-08-22</time> &#8226; <span class="post-meta__tags tags">Xcode CocoaPods 私有Pod Podfile pod-install pod-update</span>
    </div>
    <h1 class="post-title">CocoaPods使用备忘</h1>
  </header>

  <section class="post">
    <blockquote>
  <p>使用CocoaPods也有很长一段时间了，最近几个月的时间里也主导了公司私有Pods的创建和使用。在此期间踩过了不少坑，在踩坑的过程中也收获了不少经验，更加熟练地掌握了CocoaPods的一些指令的使用。本篇作为这段时间收获的备忘。</p>
</blockquote>

<h2 id="一cocoapods简介">一、CocoaPods简介</h2>

<p>CocoaPods是专门为iOS工程提供第三方依赖库的管理工具，通过CocoaPods，我们可以更方便地管理每个第三方库的版本，而且不需要我们做太多的配置，就可以直观、集中和自动化地管理我们项目的第三方库。</p>

<p>CocoaPods将所有依赖的库都放在一个名为Pods的项目下，然后让主项目依赖Pods项目。然后，我们编码工作都从主项目转移到Pods项目。Pods项目最终会编译为一个libPod-项目名.a静态库，主项目依赖于这个静态库。</p>

<p>对于资源文件，CocoaPods 提供了一个名为 Pods-resources.sh 的 bash 脚本，该脚本在每次项目编译的时候都会执行，将第三方库的各种资源文件复制到目标目录中。</p>

<p>CocoaPods 通过一个名为 Pods.xcconfig 的文件来在编译时设置所有的依赖和参数。</p>

<p>CocoaPods是用 Ruby 写的，并由若干个 Ruby 包 (gems) 构成的。在解析整合过程中，最重要的几个 gems 分别是： <a href="https://github.com/CocoaPods/CocoaPods/">CocoaPods/CocoaPods</a>, <a href="https://github.com/CocoaPods/Core">CocoaPods/Core</a>, 和 <a href="https://github.com/CocoaPods/Xcodeproj">CocoaPods/Xcodeproj</a>。</p>

<h3 id="cocoapod的核心组件">CocoaPod的核心组件</h3>

<ul>
  <li>
    <p>CocoaPods/CocoaPod
这是是一个面向用户的组件，每当执行一个 pod 命令时，这个组件都将被激活。该组件包括了所有使用 CocoaPods 涉及到的功能，并且还能通过调用所有其它的 gems 来执行任务。</p>
  </li>
  <li>
    <p>CocoaPods/Core
Core 组件提供支持与 CocoaPods 相关文件的处理，文件主要是 Podfile 和 podspecs。</p>
  </li>
  <li>
    <p>Podfile
Podfile 是一个文件，用于定义项目所需要使用的第三方库。该文件支持高度定制，你可以根据个人喜好对其做出定制。更多相关信息，请查阅 Podfile 指南。</p>
  </li>
  <li>
    <p>Podspec
.podspec 也是一个文件，该文件描述了一个库是怎样被添加到工程中的。它支持的功能有：列出源文件、framework、编译选项和某个库所需要的依赖等。</p>
  </li>
  <li>
    <p>CocoaPods/Xcodeproj
这个 gem 组件负责所有工程文件的整合。它能够对创建并修改 .xcodeproj 和 .xcworkspace 文件。它也可以作为单独的一个 gem 包使用。如果你想要写一个脚本来方便的修改工程文件，那么可以使用这个 gem。</p>
  </li>
</ul>

<p>CocoaPod的安装和配置，以及Podfile中第三方库引用的语法规则（特别是版本号的语法格式）这里就不赘述了，下面挑重点讲一讲。</p>

<h2 id="二多target时podfile该如何写">二、多target时Podfile该如何写？</h2>

<p>我的建议是使用Ruby语法，定义不同的分组，然后不同的target可以自由选择依赖哪些分组，这种方式看起来更简洁，对于多target的项目来说也更友好：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>platform :ios, '8.0'

def commonPods #通用pods集
    pod 'AFNetworking', '~&gt; 2.0'
    pod 'Masonry'
end

def appOnlyPods #app专用pods集
    pod 'MBProgressHUD'
end

def extensionPods #扩展专用pods集
    pod 'GTSDKExtension'
end

target :TestCocoaPods do
    commonPods
    appOnlyPods

    target :TestCocoaPodsTests do
    inherit! :search_paths
    # Pods for testing
    end

    target :TestCocoaPodsUITests do
        inherit! :search_paths
        # Pods for testing
    end
end

target :SecondTarget do
    commonPods
end

</code></pre></div></div>

<h2 id="三如何忽略pods警告">三、如何忽略Pods警告？</h2>

<p>有些第三方Pod集成进来会有一大堆警告信息，如果你看着比较难受想把它忽略的话，在Podfile中对应的target或分组下加上关键字<code class="highlighter-rouge">inhibit_all_warnings</code>即可。</p>

<h2 id="四如何直接引用第三方库中的头文件">四、如何直接引用第三方库中的头文件？</h2>

<p>在用CocoaPods集成第三方库之后，默认情况下，我们需要使用类似<code class="highlighter-rouge">#import &lt;XXX/YYY.h&gt;</code>的方式引入第三方库的头文件。我们可以在Build Settings -&gt; User Header Search Paths中添加<code class="highlighter-rouge">${SRCROOT}</code>并设置成recursive，这样我们就可以直接使用<code class="highlighter-rouge">#impot "YYY.h"</code>这种方式了。</p>

<h2 id="五pod-install-or-pod-update">五、<code class="highlighter-rouge">pod install</code> or <code class="highlighter-rouge">pod update</code>?</h2>

<p>如官方文档所说，<code class="highlighter-rouge">pod install</code> 和 <code class="highlighter-rouge">pod update</code>确实是大家最容易搞混的两条指令，很多人还没搞清楚这两条指令的区别，反正不管三七二十一上来就是一个<code class="highlighter-rouge">pod update</code>，大家一定要搞清楚这两条指令的区别。</p>

<p>按照官方文档所说，<code class="highlighter-rouge">pod install</code>在第一次检索集成第三方以及每一次在Podfile中新增、更改或删除pod的时候使用。每一次执行<code class="highlighter-rouge">pod install</code>命令，它都会下载安装新的pod，并且会把每一个安装的pod的版本信息写入Podfile.lock文件。Podfile.lock文件跟踪每一个安装的pod的版本并且上锁。每一次执行<code class="highlighter-rouge">pod install</code>命令，只解决还没有在Podfile.lock中列出的依赖：对于已在Podfile.lock中列出的pod，会下载指定的版本，不会检查是否有新版本。对于没有在Podfile.lock中列出的pod，它会搜索并安装Podfile中指定的版本。</p>

<p>直接执行<code class="highlighter-rouge">pod update</code>命令会检查安装Podfile中列出的所有pod的新版本（往往比较慢）。</p>

<p>执行<code class="highlighter-rouge">pod update PODNAME</code>命令会检查PODNAME的新版本（不考虑Podfile.lock中记录的版本信息），它会把PODNAME更新为最新版本，只要跟Podfile中指定的版本匹配。也就是说，<code class="highlighter-rouge">pod update PODNAME</code>将PODNAME更新到Podfile中指定的版本，可以是更新到老版本也可以是更新到新版本，取决于Podfile。（比如：如果此时Podfile中指定了<code class="highlighter-rouge">pod 'AFNetworking', '~&gt; 2.0'</code>，此时执行<code class="highlighter-rouge">pod update AFNetworking</code>并不会把AFNetworking更新到最新版本（因为此时的版本满足大于等于2.0版），必须先修改Podfile中的版本信息才会更新到指定版本）。</p>

<p>两者的区别：</p>

<ul>
  <li>
    <p>用<code class="highlighter-rouge">pod install</code>命令来安装新的pod，每次在Podfile中新增和删除pod都使用<code class="highlighter-rouge">pod install</code>命令。</p>
  </li>
  <li>
    <p>在Podfile中添加新的pod后应该用<code class="highlighter-rouge">pod install</code>命令，而不是<code class="highlighter-rouge">pod update</code>命令。通过<code class="highlighter-rouge">pod install</code>命令安装新的pod而不用担心在同一进程中修改已有的pod。</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">pod update</code>命令仅用在更新指定pod到指定版本或者更新所有pod。</p>
  </li>
</ul>

<p>我的建议是：该用<code class="highlighter-rouge">pod install</code>的时候不要用<code class="highlighter-rouge">pod update PODNAME</code>。另外，尽量不要用<code class="highlighter-rouge">pod update</code>，因为它是全部检查一遍，不仅慢有时候还会出现坑。比如有一个依赖的第三方库本来是2.0版本的用的好好的，因为它是国外的资源，下载起来非常慢，我们在没有bug的情况下是不希望轻易去更新它的，那么如果你上来就是一个<code class="highlighter-rouge">pod update</code>指令，OK， 如果你Podfile中指定了每次使用最新版本（不指定版本号），那么CocoaPods就会去下载最新的这个第三方库，那在下载完成之前你还要不要做其他事情了？这还是情况好的，如果这个最新的版本一直下载失败，所以一直集成失败怎么办？</p>

<h2 id="六如何创建私有pod">六、如何创建私有Pod？</h2>

<p>要创建私有Pod，首先我们需要两个私有仓库，一个放私有Pod源码，一个放私有Pod的说明书（类似公有Pod的<a href="https://github.com/CocoaPods/Specs">CocoaPods/Specs</a>）。</p>

<h3 id="1添加私有spec仓库到本地">1、添加私有Spec仓库到本地</h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pod repo add privateSpecs your_privateSpecs.git

</code></pre></div></div>

<p>如果执行成功，之后便可以通过<code class="highlighter-rouge">pod repo list</code>命令查看本地Spec仓库列表，正常情况下会有一个公有的CocoaPod官方的master repo 和你的 privateSpecs repo，并可以看到它们在本地的存放路径（其实在<code class="highlighter-rouge">~/.cocoapods/repos</code>目录下）。</p>

<h3 id="2创建私有pod">2、创建私有Pod</h3>

<p>在私有Pod代码所在文件夹下执行<code class="highlighter-rouge">pod spec create your_podName</code>在该目录下创建一个your_podName.podspec说明书文件。之后的工作就是编辑这个说明书文件了，这里简单注明一下规则：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Pod::Spec.new do |s|

  s.name         = "ATCategory"
  s.version      = "0.0.1"
  s.summary      = "共用扩展类集合"
  s.description  = &lt;&lt;-DESC
  大家如果需要用到扩展，都使用这里已有的扩展啦。
                   DESC
  s.homepage     = "your_privatePodGit_address/ATCategory"
  s.author       = { "ApesTalk" =&gt; "lqcjdx@163.com" }
  s.platform     = :ios
  s.platform     = :ios, "8.0"
  s.source       = { :git =&gt; "your_privatePodGit_address", :tag =&gt; "#{s.version}"
  # 如果你有多个私有Pod放在一个仓库里，你可以修改tag像下面这样，对应打tag的时候的规则就对应需要变成PodName-v0.0.1这样子了
  # s.source       = { :git =&gt; "your_privatePodGit_address", :tag =&gt; s.name + "-v"+"#{s.version}"
}
  s.source_files  = 'ATCategory/**/*'
  s.public_header_files = 'ATCategory/Category/*.h'
  s.requires_arc = true
  s.frameworks = 'UIKit','Foundation'

# 依赖的系统library，这里是指系统的类似libz.tbd、libxml2.tbd这类的系统库
# s.library = 'z' // 单个
# s.libraries = 'z','xml2' // 多个

# 第三方.a
# s.vendored_libraries =
# 第三方frameworks文件
# s.vendored_frameworks =
# 依赖关系，该项目所依赖的其他库，如果有多个需要填写多个s.dependency
# s.dependency 'AFNetworking', '~&gt; 2.3'
# 资源文件地址
# s.resource_bundles = {
#   'ATCategory' =&gt; ['ATCategory/Images/*.png']
# }
end
</code></pre></div></div>

<h3 id="3提交源代码并打tag">3、提交源代码并打tag</h3>

<p>注意这里tag必须跟podspec文件中的tag保持一致，因为CocoaPod是通过podspec文件中的tag去找源文件的，如果tag对应不起来就会验证失败。打好tag提交到远端。</p>

<h3 id="4验证podspec文件合法性和可选参数">4、验证podspec文件合法性和可选参数</h3>

<p>有两种验证方式，一种是本地验证<code class="highlighter-rouge">pod lib lint your_podName.podspec</code>和联网验证<code class="highlighter-rouge">od spec lint your_podName.podspec</code>。建议大家都用联网验证。</p>

<p>这里可选参数有:</p>

<ul>
  <li><code class="highlighter-rouge">--allow-warnings</code>：允许警告</li>
  <li><code class="highlighter-rouge">--sources=‘master,privateSpecs</code>：指定源，比如你的私有pod同时依赖了公有库和私有库，你必须指定源才行，因为默认只会去在公有源中查找对应的依赖</li>
  <li><code class="highlighter-rouge">--use-libraries</code>：如果使用了静态库，记得加上它</li>
</ul>

<h3 id="5提交说明书文件到私有说明书库">5、提交说明书文件到私有说明书库</h3>

<p><code class="highlighter-rouge">pod repo push privateSpecs your_podName.podspec</code>，同样的加上上面验证时使用到的可选参数。</p>

<h3 id="6如果使用素材">6、如果使用素材？</h3>

<p>官方建议pod中的素材用bundle的形式避免和主项目中的文件名发生冲突，那么集成后我们如何使用bundle中的素材呢？</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>NSBundle *bundle = [NSBundle mainBundle];
//NSBundle *bundle = [NSBundle bundleForClass:[ClassFromPodspec class]];//对于静态库，拿到的是mainBundle，如果是动态库，拿到的是类所在的bundle。使用动态库需要在Podfile中开启use_frameworks!
NSURL *wttpodBundleURL = [bundle URLForResource:@"WTTPod" withExtension:@"bundle"];
NSBundle *wttpodBundle = [NSBundle bundleWithURL: wttpodBundleURL];
UIImage *img = [UIImage imageNamed:@"Chat_checkin_empty_stu" inBundle:wttpodBundle compatibleWithTraitCollection:nil];
</code></pre></div></div>

<h3 id="7关于subspec">7、关于subspec</h3>

<p>如果我们的pod中文件比较多，而我们又希望能像AFNetworking那样集成后分几个物理文件夹（默认会把所有文件都放在一个物理文件夹下，文件太多会显得很乱），那么就要用到subspec来把我们的pod分成几个独立的子模块。</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
s.subspec '子模块名称' do |别名，不能和子模块名称相同，比如ss|

ss.source_files = ''

end

</code></pre></div></div>

<p>具体怎么用，大家可以参考AFNetworking.podspec文件中的写法。</p>

<h2 id="七如何使用私有库">七、如何使用私有库</h2>

<p>如果我们同时使用了公有库和私有库，我们只需要在Podfile的头部同时把公有库和私有库的source加上即可。</p>

<h2 id="八pod-search搜不到私有库或者搜得到pod-install失败">八、<code class="highlighter-rouge">pod search</code>搜不到私有库？或者搜得到<code class="highlighter-rouge">pod install</code>失败？</h2>

<p>在提交私有库说明书之后，先执行一下<code class="highlighter-rouge">pod repo update privateSpecs</code>，然后再集成。</p>

<h2 id="九集成某一个pod速度过慢比如mobilevlckit总是下载失败">九、集成某一个pod速度过慢，比如MobileVLCKit总是下载失败</h2>

<p>把对应版本的MobileVLCKit下载下来放在访问速度更快的地方（比如内网服务器或者本机用Python开启一个FTP服务）在本机master repo源中搜索找到对应版本的MobileVLCKit.podspec.json文件，把其中的source改成我们存放MobileVLCKit.tar.xz文件地址，之后再执行相关指令集成。</p>

<p>如何利用Python开启一个本地FTP服务：</p>

<p>cd到要共享的目录下，执行<code class="highlighter-rouge">python -m SimpleHTTPServer 8000</code>，之后同一个局域网内就可以通过<code class="highlighter-rouge">本机ip:8000</code>访问到该共享文件夹了。</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
"http":"http://192.168.210.111:8000/MobileVLCKit-3.1.2-bf58e19-37855b857a.tar.xz"

</code></pre></div></div>

<p>获取本机IP地址的方法：按住Option的同时点下Mac菜单栏的无线网Icon，在下拉列表中即可看到IP地址。也可以在终端中输入<code class="highlighter-rouge">ifconfig en0</code>命令查看。</p>

<h2 id="十验证podspec时报错-symbols-not-found-for-architecture-i386">十、验证podspec时，报错 symbol(s) not found for architecture i386</h2>

<p>检查一下是否私有Pod中使用到的什么文件不支持i386架构，比如什么.a文件。</p>

<p>解决办法：在podspec文件中指定支持的架构</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>valid_archs = ['armv7s','arm64',]
s.xcconfig = {
  'VALID_ARCHS' =&gt;  valid_archs.join(' '),
}
s.pod_target_xcconfig = {
    'ARCHS[sdk=iphonesimulator*]' =&gt; '$(ARCHS_STANDARD_64_BIT)'
}
</code></pre></div></div>

<h2 id="十一pod-init失败">十一、<code class="highlighter-rouge">pod init</code>失败？</h2>

<p>用Xcode9.4.1新建一个项目，然后执行<code class="highlighter-rouge">pod init</code>（Cocoapods1.4.0版本）时提示失败，错误提示如下：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
――― MARKDOWN TEMPLATE ―――――――――――――――――――――――――――――――――――――――――――――――――――――――――――

### Command

/usr/local/Cellar/cocoapods/1.4.0/libexec/bin/pod init


### Report

* What did you do?

* What did you expect to happen?

* What happened instead?


### Stack

   CocoaPods : 1.4.0
        Ruby : ruby 2.3.3p222 (2016-11-21 revision 56859) [universal.x86_64-darwin17]
    RubyGems : 2.5.2
        Host : Mac OS X 10.13.3 (17D47)
       Xcode : 9.4.1 (9F2000)
         Git : git version 2.15.2 (Apple Git-101.1)
Ruby lib dir : /System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib
Repositories : ios-cocoapodsSpecs - http://git.zhihuishu.com/coder/ios-cocoapodsSpecs.git @ 4c4f38416c28d58d4dda2a706879956c5861a55e
               master - https://github.com/CocoaPods/Specs.git @ 1eab292c36f39ecb104af54e474b00f142e57d0f


### Plugins


cocoapods-deintegrate : 1.0.2
cocoapods-plugins     : 1.0.0
cocoapods-search      : 1.0.0
cocoapods-stats       : 1.0.0
cocoapods-trunk       : 1.3.0
cocoapods-try         : 1.1.0


### Error


RuntimeError - [Xcodeproj] Unknown object version.
/usr/local/Cellar/cocoapods/1.4.0/libexec/gems/xcodeproj-1.5.4/lib/xcodeproj/project.rb:217:in `initialize_from_file'
/usr/local/Cellar/cocoapods/1.4.0/libexec/gems/xcodeproj-1.5.4/lib/xcodeproj/project.rb:102:in `open'
/usr/local/Cellar/cocoapods/1.4.0/libexec/gems/cocoapods-1.4.0/lib/cocoapods/command/init.rb:41:in `validate!'
/Library/Ruby/Gems/2.3.0/gems/claide-1.0.2/lib/claide/command.rb:333:in `run'
/usr/local/Cellar/cocoapods/1.4.0/libexec/gems/cocoapods-1.4.0/lib/cocoapods/command.rb:52:in `run'
/usr/local/Cellar/cocoapods/1.4.0/libexec/gems/cocoapods-1.4.0/bin/pod:55:in `&lt;top (required)&gt;'
/usr/local/Cellar/cocoapods/1.4.0/libexec/bin/pod:22:in `load'
/usr/local/Cellar/cocoapods/1.4.0/libexec/bin/pod:22:in `&lt;main&gt;'


――― TEMPLATE END ――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――――

[!] Oh no, an error occurred.

Search for existing GitHub issues similar to yours:
https://github.com/CocoaPods/CocoaPods/search?q=%5BXcodeproj%5D+Unknown+object+version.&amp;type=Issues

If none exists, create a ticket, with the template displayed above, on:
https://github.com/CocoaPods/CocoaPods/issues/new

Be sure to first read the contributing guide for details on how to properly submit a ticket:
https://github.com/CocoaPods/CocoaPods/blob/master/CONTRIBUTING.md

Don't forget to anonymize any private data!

Looking for related issues on cocoapods/cocoapods...
 - Pod Update: RuntimeError - [Xcodeproj] Unknown object version. Xcode Beta 5
   https://github.com/CocoaPods/CocoaPods/issues/8003 [closed] [17 comments]
   a day ago

 - RuntimeError - [Xcodeproj] Unknown object version.
   https://github.com/CocoaPods/CocoaPods/issues/7697 [closed] [28 comments]
   3 weeks ago

 - Pod init. Unknown object version
   https://github.com/CocoaPods/CocoaPods/issues/7907 [closed] [2 comments]
   03 Jul 2018

and 42 more at:
https://github.com/cocoapods/cocoapods/search?q=[Xcodeproj]%20Unknown%20object%20version.&amp;type=Issues&amp;utf8=✓

</code></pre></div></div>

<p>这种失败原因是Cocoapods和xcodeproj版本兼容问题。</p>

<p>尝试了网上的解决办法<a href="https://link.jianshu.com/?t=https://github.com/CocoaPods/CocoaPods/issues/6168">Run gem install xcodeproj:1.4.1</a>，依然失败。</p>

<p>解决办法：打开项目，在Project Document下将Project Format从Xcode 9.3-compatible修改为Xcode 8.0-compatible即可。</p>

<p><img src="https://apestalk.github.io/assets/BlogImages/Xocde_project_format.png" alt="Xocde_project_format" /></p>

<h2 id="十二在pod中引入项目文件报错file-not-found">十二、在pod中引入项目文件报错（file not found）</h2>

<p>在开发中有时候需要在pod中import项目中的文件进行调试或测试（当然这种情况比较少见），但是当你输入import的时候会发现系统根本没法联想到你想用的项目中的文件，即使你手动写入，也会报file not found的错误。</p>

<p>此时，可以在我们的Pods项目中的Build settings下找到 User Header Search Paths，添加一行，并设置<code class="highlighter-rouge">$(SRCROOT)/..</code>为recursive。注意有<code class="highlighter-rouge">/..</code>，意思是到当前目录的上级目录。意思是在上级目录下递归查找文件。</p>

<p><img src="https://apestalk.github.io/assets/BlogImages/wx.jpeg" alt="欢迎关注支持" /></p>
<center>感谢关注支持</center>


  </section>
</article>

<section class="read-more">
   
   
   <div class="read-more-item">
       <span class="read-more-item-dim">最近的文章</span>
       <h2 class="post-list__post-title post-title"><a href="/2018/09/%E9%98%BF%E9%87%8CAPI%E7%BD%91%E5%85%B3%E4%BD%BF%E7%94%A8%E6%80%BB%E7%BB%93/" title="link to 阿里API网关使用总结">阿里API网关使用总结</a></h2>
       <p class="excerpt">  最近大半年的时间里，为了加强公司API的安全性，公司尝试了接入阿里API网关的服务。在这期间，由我调研和宣贯阿里API网关的使用并基于AFNetworking封装一个方便我们内部使用的带阿里API网关的网络请求框架。本篇介绍一下API网关的使用流程和我们在使用期间遇到的各种问题以及解决方案。API网关 API Gateway）提供高性能、高可用的 API 托管服务，帮助用户对外开放其部署在 ECS、容器服务等阿里云产品上的应用，提供完整的 API 发布、管理、维护生命周期管理。用户只需...&hellip;</p>
       <div class="post-list__meta"><time datetime="2018-09-09 21:10:00 +0800" class="post-list__meta--date date">2018-09-09</time> &#8226; <span class="post-list__meta--tags tags">阿里 API网关 网关 API GateWay</span><a class="btn-border-small" href=/2018/09/%E9%98%BF%E9%87%8CAPI%E7%BD%91%E5%85%B3%E4%BD%BF%E7%94%A8%E6%80%BB%E7%BB%93/>继续阅读</a></div>
   </div>
   
   
   
   
   <div class="read-more-item">
       <span class="read-more-item-dim">更早的文章</span>
       <h2 class="post-list__post-title post-title"><a href="/2018/08/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E7%AC%94%E8%AE%B0/" title="link to 博客搭建笔记">博客搭建笔记</a></h2>
       <p class="excerpt">  本篇记录一下自己是如何一步步利用GitHub Page、jekyll以及喵神的vno-jekyll模板来搭建属于自己的博客的。一、在GitHub上建一个username.github.io的仓库注意username必须跟自己github用户名保持一致，包括大小写。然后你可以在仓库中新建一个index.html文件，简单写上点HTML代码，之后就可以通过https://username.github.io来访问自己的个人博客主页了。对，就是这么简单，其他一切GitHub都替你做好了。但是...&hellip;</p>
       <div class="post-list__meta"><time datetime="2018-08-20 00:40:00 +0800" class="post-list__meta--date date">2018-08-20</time> &#8226; <span class="post-list__meta--tags tags">GitHub jekyll vno-jekyll</span><a class="btn-border-small" href=/2018/08/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E7%AC%94%E8%AE%B0/>继续阅读</a></div>
   </div>
   
</section>

<section class="post-comments">
  
    <div id="disqus_thread"></div>
    <script>
    
    var disqus_config = function () {
        this.page.url = "http://localhost:4000/2018/08/CocoaPods%E4%BD%BF%E7%94%A8%E5%A4%87%E5%BF%98/";
        this.page.identifier = "/2018/08/CocoaPods%E4%BD%BF%E7%94%A8%E5%A4%87%E5%BF%98/";
    };

    var disqus_shortname = 'vno-jekyll';
    
    (function() { // DON'T EDIT BELOW THIS LINE
        var d = document, s = d.createElement('script');
        s.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        })();
    </script>
    <noscript>要查看<a href="http://disqus.com/?ref_noscript"> Disqus </a>评论，请启用 JavaScript</noscript>
    
  
  
  
  
</section>


            <section class="footer">
    <footer>
    	<span class="footer__copyright">本站点采用<a href="http://creativecommons.org/licenses/by-nc-sa/4.0/">知识共享 署名-非商业性使用-相同方式共享 4.0 国际 许可协议</a></span>
        <span class="footer__copyright">由 <a href="https://jekyllrb.com">Jekyll</a> 于 2019-03-20 生成，感谢 <a href="https://www.digitalocean.com/?refcode=30ed2d146762">Digital Ocean</a> 为本站提供稳定的 VPS 服务</span>
        <span class="footer__copyright">本站采用 <a href="https://github.com/onevcat/vno-jekyll">Vno - Jekyll</a> 作为主题，您可以在 GitHub 找到<a href="https://github.com/onevcat/OneV-s-Den">本站源码</a> - &copy; 2019</span>
    </footer>
</section>

        </div>
    </div>
    
    <script type="text/javascript" src="//code.jquery.com/jquery-1.11.3.min.js"></script>

<script type="text/javascript" src="/js/main.js"></script>



    
  </body>

</html>
